# 文档智能比对分析工具 - 项目概览

## 🎯 项目简介

文档智能比对分析工具是一款基于 React + TypeScript + AI 技术的在线文档比对工具。它能够快速比对两篇 Word 文档的差异，并使用文心大模型进行智能分析，为用户提供专业的差异分析报告。

## ✨ 核心特性

### 1. 智能文档比对
- 📄 支持 .doc 和 .docx 格式
- 🔍 词级别精确差异检测
- 🎨 直观的颜色高亮显示
- 📊 自动生成差异统计

### 2. AI 智能分析
- 🤖 接入文心大模型
- ⚡ 流式响应实时显示
- 📝 结构化分析报告
- 💡 专业的评价和建议

### 3. 优秀的用户体验
- 🖱️ 拖拽上传支持
- 👀 左右对照展示
- 📱 响应式设计
- 🎭 流畅的动画效果

## 🏗️ 技术架构

### 前端技术栈
```
React 18.0.0          - UI 框架
TypeScript 5.9.3      - 类型安全
Vite 5.1.4            - 构建工具
Tailwind CSS 3.4.11   - 样式框架
shadcn/ui             - 组件库
```

### 核心依赖
```
mammoth               - Word 文档解析
diff                  - 文本差异比对
ky                    - HTTP 客户端
eventsource-parser    - SSE 流式解析
streamdown            - Markdown 渲染
react-dropzone        - 文件拖拽上传
```

## 📁 项目结构

```
app-7m0ueu4u3lz5/
├── docs/                          # 文档目录
│   ├── prd.md                     # 需求文档
│   ├── 使用说明.md                 # 使用说明
│   ├── 项目总结.md                 # 项目总结
│   ├── 快速开始.md                 # 快速开始
│   ├── 功能清单.md                 # 功能清单
│   └── 项目概览.md                 # 项目概览
├── src/
│   ├── components/                # 组件目录
│   │   ├── AIAnalysisPanel.tsx    # AI 分析面板
│   │   ├── DocumentUploader.tsx   # 文档上传组件
│   │   ├── DocumentViewer.tsx     # 文档查看器
│   │   ├── common/                # 通用组件
│   │   └── ui/                    # UI 组件库
│   ├── services/                  # 服务目录
│   │   ├── aiService.ts           # AI 服务
│   │   └── documentService.ts     # 文档处理服务
│   ├── pages/                     # 页面目录
│   │   ├── SamplePage.tsx         # 主页面
│   │   └── NotFound.tsx           # 404 页面
│   ├── hooks/                     # 自定义 Hooks
│   ├── lib/                       # 工具函数
│   ├── types/                     # 类型定义
│   ├── index.css                  # 全局样式
│   ├── App.tsx                    # 应用入口
│   └── main.tsx                   # 主入口
├── .env                           # 环境变量
├── package.json                   # 依赖配置
├── tailwind.config.mjs            # Tailwind 配置
├── vite.config.ts                 # Vite 配置
└── README.md                      # 项目说明
```

## 🎨 设计系统

### 配色方案
- **主色调**: 科技蓝 `hsl(221, 83%, 53%)` (#2E5BFF)
- **新增内容**: 黄色 `hsl(48, 96%, 53%)`
- **删除内容**: 红色 `hsl(0, 84%, 60%)`
- **修改内容**: 橙色 `hsl(25, 95%, 53%)`

### 视觉风格
- 8px 圆角设计
- 轻微阴影效果
- 渐变背景
- 线性风格图标

## 🚀 核心功能

### 1. 文档上传
```typescript
// 支持拖拽和点击上传
<DocumentUploader
  label="上传文档 1（原始版本）"
  selectedFile={file1}
  onFileSelect={setFile1}
/>
```

### 2. 文档比对
```typescript
// 词级别差异检测
const diffResults = compareDocuments(doc1.content, doc2.content);
```

### 3. AI 分析
```typescript
// 流式 AI 响应
await sendChatStream({
  endpoint: AI_ENDPOINT,
  apiId: APP_ID,
  messages: [{ role: 'user', content: prompt }],
  onUpdate: (content) => setAiAnalysis(content),
  onComplete: () => setIsAnalyzing(false),
  onError: (error) => handleError(error)
});
```

### 4. 结果展示
```typescript
// 三栏布局
<div className="grid grid-cols-1 xl:grid-cols-3 gap-6">
  <DocumentViewer title="文档 1" diffs={diffs} isOriginal={true} />
  <DocumentViewer title="文档 2" diffs={diffs} isOriginal={false} />
  <AIAnalysisPanel analysis={aiAnalysis} isLoading={isAnalyzing} />
</div>
```

## 📊 功能流程

### 完整流程图
```
用户上传文档
    ↓
文件验证
    ↓
解析文档内容
    ↓
执行差异比对
    ↓
生成差异结果
    ↓
调用 AI 分析
    ↓
流式显示结果
    ↓
用户查看报告
```

## 🔧 开发指南

### 环境准备
```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev -- --host 127.0.0.1

# 代码检查
npm run lint
```

### 核心 API

#### 文档服务 API
```typescript
// 解析文档
parseDocument(file: File): Promise<DocumentInfo>

// 比对文档
compareDocuments(doc1: string, doc2: string): DiffResult[]

// 格式化文件大小
formatFileSize(bytes: number): string

// 生成差异摘要
generateDiffSummary(diffs: DiffResult[]): string
```

#### AI 服务 API
```typescript
// 发送聊天流
sendChatStream(options: ChatStreamOptions): Promise<void>

// 创建 SSE Hook
createSSEHook(options: SSEOptions): AfterResponseHook
```

## 📈 性能优化

### 已实现的优化
- ✅ 流式 AI 响应，减少等待时间
- ✅ 组件按需加载
- ✅ 响应式设计
- ✅ 合理的状态管理
- ✅ 避免不必要的重渲染

### 未来优化方向
- 🔄 大文档分块处理
- 🔄 Web Worker 后台解析
- 🔄 虚拟滚动优化
- 🔄 缓存机制

## 🔒 安全与隐私

### 安全措施
- 🔐 本地文档解析
- 🔐 仅发送差异摘要
- 🔐 不存储完整文档
- 🔐 HTTPS 加密传输
- 🔐 环境变量管理

### 隐私保护
- 文档处理在浏览器端完成
- AI 分析仅接收差异摘要
- 不保存用户文档内容
- 不收集用户个人信息

## 📚 文档资源

### 用户文档
- [使用说明](./使用说明.md) - 详细的使用指南
- [快速开始](./快速开始.md) - 快速上手指南

### 开发文档
- [需求文档](./prd.md) - 完整的需求说明
- [项目总结](./项目总结.md) - 技术实现总结
- [功能清单](./功能清单.md) - 功能实现清单

## 🎯 使用场景

### 适用场景
- 📝 合同文档版本比对
- 📄 报告修订内容审查
- 📋 政策文件变更分析
- 📖 论文修改记录追踪
- 📑 技术文档更新对比

### 用户群体
- 法务人员
- 编辑人员
- 项目经理
- 研究人员
- 技术文档工程师

## 🌟 项目亮点

### 技术亮点
1. **流式 AI 响应** - 使用 SSE 技术实现实时反馈
2. **词级别比对** - 精确到词的差异检测
3. **响应式设计** - 完美适配多种设备
4. **组件化架构** - 高度模块化，易于维护
5. **类型安全** - 完整的 TypeScript 类型定义

### 用户体验亮点
1. **拖拽上传** - 便捷的文件上传方式
2. **实时反馈** - 流式显示 AI 分析结果
3. **直观展示** - 颜色高亮清晰标识差异
4. **专业报告** - 结构化的分析报告
5. **友好提示** - 完善的错误处理和用户反馈

## 📞 技术支持

### 问题反馈
如遇到问题，请检查：
1. 浏览器控制台错误信息
2. 网络连接状态
3. 文档格式是否正确
4. 环境变量配置

### 联系方式
- 查看项目文档获取更多信息
- 参考使用说明解决常见问题

## 📄 许可证

本项目遵循 MIT 许可证。

---

**最后更新**: 2025-11-17  
**版本**: 1.0.0  
**状态**: ✅ 生产就绪
